<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../css/pmag.css" type="text/css" />
</head>
<body>
<div id="header_wrap">
   <h1><a href="https://www.facebook.com/groups/youngmaker.magazine/">少年科技人</a><sub>雜誌 --  <a href="http://youngmaker.github.io/201412/htm/home.html">2014 年 12 月號</a> (開放公益出版品)</sub></h1>
</div>
<div id="content">
<div id="TOC">
<ul>
<li><a href="#基於-httphtmlcssjavascript-的-web-技術">基於 HTTP/HTML/CSS/JavaScript 的 Web 技術</a></li>
</ul>
</div>
<h2 id="基於-httphtmlcssjavascript-的-web-技術">基於 HTTP/HTML/CSS/JavaScript 的 Web 技術</h2>
<p>Web 技術是建構在 Internet 這個基礎網路架構之上的一個應用層網路架構，Interent 網路所採用的協定為 TCP/IP ，而 Web 則是在 TCP/IP 之上再加上一層 HTTP 協定。</p>
<h3 id="networkinternet-與-web">Network、Internet 與 Web</h3>
<p>在英文當中、Network、Internet 與 Web 這些名詞是區分得很清楚的，但是對於中文使用者而言，這三個名詞卻很難釐清，不過對於程式人員而言，區分這幾個名詞是很重要的是，特別是 Internet 與 Web 這兩個名詞，首先讓我們來看看這些名詞的差異。</p>
<p>英文中的 Network 泛指任何的網路，包含像公路也叫做 Traffic Network，因此即使在電腦領域，Network 仍然泛指任何網路，包含區域網路、廣域網路、Internet、Ethernet 等等都是 Network。</p>
<p>Internet 是指 1960 年代美國國防部 (Department of Defense, DoD) 所發展出來的那個網路，原本稱為 ARPANET，後來延伸到全世界之後，就稱為 Internet 了。</p>
<p>1990 年 Tim Burner Lee 創造了 HTML 、URL、與全世界第一個 WebServer，從此開始創造出一個基於 Internet 的網路架構，這個網路架構被稱為 World Wide Web (簡稱為 Web 或 WWW)，後來在 1992 年當時 Marc Andreessen 招聘了一些程式員開發出一個稱為 Mosaic 的瀏覽器 (Browser, 也就是 Web 的 Client 介面) 之後，推動了 Web 的急速發展。</p>
<p>所以，凡是透過瀏覽器接觸到的網路，通常就是 Web 。而不是透過瀏覽器接觸到網路的軟體，則通常是基於 Internet 的應用程式。所以您用 Internet Explorer, Firefox, Chrome, Safari 等瀏覽器所看到的網站，其實都是一個一個的 Web 程式所組成的，而那些不經過瀏覽器，而是要另外安裝的應用程式，像是 Skype、MSN 等，則是 Internet 應用程式。</p>
<p>本書的焦點是 Web 的程式設計，也就是網站的設計，而非像 Skype、MSN 這樣的 Internet 應用程式。</p>
<p>如果您想學習的是 Internet 應用程式的設計，筆者另外有寫一本採用 C# 的程式設計書籍，請參閱該書，該書的網址如下：</p>
<ul>
<li><a href="http://ccckmit.github.io/csharpbook/htm/book.html" class="uri">http://ccckmit.github.io/csharpbook/htm/book.html</a></li>
</ul>
<h3 id="web-的相關技術">Web 的相關技術</h3>
<p>HTTP 是 Web (台灣稱「全球資訊網」、中國大陸稱「萬維網」) 的基礎協定，該協定架構在 TCP/IP 架構之上，屬於應用層的協定。構成 HTTP 的主要兩個應用程式是瀏覽器 (Browser) 與網站 (Web Server)。HTTP 是一個典型的 Client-Server (客戶端-伺服端) 架構的協定，使用者透過 Client 端的瀏覽器連結到 Server 的伺服器，然後由伺服端將結果以 HTML 的網頁格式傳回。 HTML 的網頁當中包含了許多超連結 (Hyperlink)，這些超連結連接到某些網址 (URL)，於是使用者可以透過瀏覽器中的超連結，進一步點選其他的網頁，進行網路瀏覽的行為。</p>
<p>絕大部分的使用者，現在都是使用 Internet Explorer, Firefox, Chrome, Safari 等瀏覽器在上網，因此所使用到的就是 Web 程式，本書的焦點也正是這種基於 Web 的程式技術。</p>
<p>Web 相關的技術非常的多，其中最核心的部分是 HTTP/HTML/URL/CSS/JavaScript 等技術，而圍繞著這些核心技術上所發展出來的技術則難以數計，像是 PHP、ASP/ASP.NET、JSP、Ruby on Rail、Python/Dejango、Node.js、XML、JSON、XMLHTTP、AJAX、jQuery 等等，本書後面的章節將採用一個最少語言的架構，以 JavaScript 為核心，採用 HTML + CSS + JavaScript 為主要技術，並搭配 JavaScript 所衍生出的 jQuery 與 Node.js 等技術，以建構出完整的 Web 程式設計概念。</p>
<blockquote>
<p>Web = HTTP + HTML + CSS + JavaScript + jQuery + Node.js 所組成的 Web Programming 技術</p>
</blockquote>
<p>其中、HTTP 是所有技術的起點，讓我們先來看看 HTTP 到底做了甚麼事。</p>
<h3 id="html-與-http">HTML 與 HTTP</h3>
<p>當您用 Browser 看網站的時候，到底 Browser 傳遞什麼訊息給 Server，而 Server 又回傳神麼訊息給 Browser 呢？</p>
<p>粗略的說、一個最簡單的 Web Server 之功能包含下列三個步驟：</p>
<ul>
<li>步驟一 : 接收瀏覽器所傳來的網址。</li>
<li>步驟二 : 取出相對應的檔案。</li>
<li>步驟三 : 將檔案內容傳回給瀏覽器。</li>
</ul>
<p>然而、在這個接收與傳回的過程中，所有的資訊都必須遵照固定的格式，規範這個接收/傳送格式的協定，稱為超文字傳送協定 (Hyper Text Transfer Protocol)，簡稱為 HTTP 協定。</p>
<p>HTTP 協定格式的基礎，乃是建構在網址 URL 上的傳輸方式，早期只能用來傳送簡單的 HTML 檔案，後來經擴充後也可以傳送 其他類型的檔案，包含 影像、動畫、簡報、Word 文件等。</p>
<p>在本文中，我們將先簡介 HTTP 協定的訊息內容，然後在介紹如何以 Java 語言實作 HTTP 協定，以建立一個簡單的 Web Server。</p>
<h3 id="http-協定">HTTP 協定</h3>
<p>當你在 Browser 上打上網址(URL)後， Browser 會傳出一個HTTP訊息給對應的 Web Server，Web Server 再接收到這個訊息後， 根據網址取出對應的檔案，並將該檔案以 HTTP 格式的訊息傳回給瀏覽器，以下是這個過程的一個範例。</p>
<p>豬小弟上網，在瀏覽器中打上 http://ccc.kmit.edu.tw/index.htm，於是、瀏覽器傳送下列訊息給 ccc.kmit.edu.tw 這台電腦。</p>
<pre><code>GET /index.htm HTTP/1.0
Accept: image/gif, image/jpeg, application/msword, */*
Accept-Language: zh-tw
User-Agent: Mozilla/4.0
Content-Length: 
Host: ccc.kmit.edu.tw
Cache-Control: max-age=259200
Connection: keep-alive
</code></pre>
<p>當 ccc.kmit.edu.tw 電腦上的 Web Server 程式收到上述訊息後，會取出指定的路徑 /index.htm ，然後根據預設的網頁根目錄 (假設為 c:)，合成一個 c:.htm 的絕對路徑，接著從磁碟機中取出該檔案，並傳回下列訊息給豬小弟的瀏覽器。</p>
<pre><code>HTTP/1.0 200 OK
Content-Type: text/html
Content-Length: 438
&amp;lt;html&amp;gt;
  ....
&amp;lt;/html&amp;gt;</code></pre>
<p>其中第一行 HTTP/1.0 200 OK 代表該網頁被成功傳回，第二行 Content-Type: text/html 代表傳回文件為 HTML 檔案， Content-Length: 438 代表該 HTML 檔案的大小為 438 位元組。</p>
<p>換言之、 Browser 會傳遞一個包含網頁路徑的表頭資訊給 Server，而 Server 則會回傳一個 HTML 檔案給 Browser，這樣的傳送格式與規則，就稱為 HTTP 協定。</p>
<p>在 Web 開始成長之後，這樣的模式就顯得有點不足了，因為很多網頁需要使用者填入一些欄位，像是帳號密碼等資訊，但是上述的表頭並沒有欄位資訊預留空間，於是為了回傳這些使用者填入的訊息，有人想到了可以在網址的後面補上參數，這種方式就稱為 GET 的參數傳送方式，以下是一個傳送帳號密碼的表頭訊息，其中的 ?user=ccc&amp;password=1234567 是 Browser 傳送給 Server 的參數。</p>
<pre><code>GET /login?user=ccc&amp;password=1234567 HTTP/1.0
Accept: image/gif, image/jpeg, application/msword, */*
Accept-Language: zh-tw
User-Agent: Mozilla/4.0
Content-Length: 
Host: ccc.kmit.edu.tw
Cache-Control: max-age=259200
Connection: keep-alive
</code></pre>
<p>但是後來，這些填入的欄位越來越多，傳送的參數訊息也越來越長，而這些訊息有些也不希望被顯示在網址列上讓大家看到，因此又發展出了另外一種參數傳遞方式，這種方式就稱為 POST，以下是POST訊息的一個範例。</p>
<pre><code>POST /msg.php HTTP/1.0
Accept: image/gif, image/jpeg, application/msword, */*
Accept-Language: zh-tw
Content-Type: application/x-www-form-urlencoded
User-Agent: Mozilla/4.0
Content-Length: 66
Host: ccc.kmit.edu.tw
Cache-Control: max-age=259200
Connection: keep-alive

user=ccc&amp;password=1234&amp;msg=Hello+%21+%0D%0AHow+are+you+%21%0D%0A++</code></pre>
<p>上述表頭中的最後一句「user=ccc&amp;password=1234&amp;msg=Hello+%21+%0D%0AHow+are+you+%21%0D%0A++」是三個欄位參數被編碼後的結果，其中的 user 欄位值是 ccc，password 欄位值是 1234，而 msg 的值則是下列文章。</p>
<pre><code>Hello !
How are you !</code></pre>
<p>POST 訊息與 GET 訊息不同的地方，除了在 HTTP 的訊息開頭改以 POST 取代 GET 之外，並且多了一個 Content-Length:66 的欄位，該欄位指示了訊息結尾會有 66 個位元組的填表資料，這些資料會被編碼後以文字模式在網路上傳遞。</p>
<p>一但 Server 取得了 Browser 傳來的 GET 或 POST 訊息後，就可以根據其訊息以進行對應的動作，像是檢查帳號密碼是否正確、將某些訊息存入資料庫、然後在透過 HTML 的方式傳送回應畫面給 Browser，這種透過 HTTP 與 HTML 的簡單互動方式，正是由 World Wide Web 所帶來的核心技術，也讓全世界都捲入了這個影響深遠的網路革命當中。</p>
<p>若您對 WebServer 的運作方式有興趣，可以參考筆者的三個程式與文章，這三個程式分別以 Java、C# 與 JavaScript/Node.js 寫成，這會讓您能夠更深入的體會 WebServer 與 HTTP 的運作原理。</p>
<ul>
<li>如何設計簡單的 WebServer? (Java 版) -- <a href="http://ccckmit.wikidot.com/code:webserver" class="uri">http://ccckmit.wikidot.com/code:webserver</a></li>
<li>如何設計簡單的 WebServer? (C# 版) -- <a href="http://cs0.wikidot.com/webserver" class="uri">http://cs0.wikidot.com/webserver</a></li>
<li>如何設計簡單的 WebServer? (JavaScript/Node.js 版) -- <a href="http://ccckmit.wikidot.com/js:nodewebserver" class="uri">http://ccckmit.wikidot.com/js:nodewebserver</a></li>
</ul>
<p>註：curl 這個工具聽說很適合用來觀察各種協定的運作原理，不過筆者還沒用過，未來會了再寫出來給大家看看！ * <a href="http://curl.haxx.se/download.html" class="uri">http://curl.haxx.se/download.html</a></p>
<h3 id="參考文獻">參考文獻</h3>
<ul>
<li>How Java Web Servers Work -- <a href="http://www.onjava.com/pub/a/onjava/2003/04/23/java_webserver.html" class="uri">http://www.onjava.com/pub/a/onjava/2003/04/23/java_webserver.html</a></li>
<li>JDK API : java.net.ServerSocket -- <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/net/ServerSocket.html" class="uri">http://java.sun.com/j2se/1.4.2/docs/api/java/net/ServerSocket.html</a></li>
<li>Hypertext Transfer Protocol (HTTP/1.0) -- <a href="http://www.w3.org/Protocols/HTTP/1.0/draft-ietf-http-spec.html" class="uri">http://www.w3.org/Protocols/HTTP/1.0/draft-ietf-http-spec.html</a></li>
</ul>
<p>【本文由陳鍾誠取材並修改自 <a href="http://zh.wikipedia.org/">維基百科</a>，採用創作共用的 <a href="http://creativecommons.org/licenses/by-sa/3.0/tw/">姓名標示、相同方式分享</a> 授權】</p>
</div>
<div id="footer">
<a href="https://www.facebook.com/groups/youngmaker.magazine/">少年科技人雜誌</a> ，採用 <a href="http://creativecommons.org/licenses/by-sa/3.0/tw/ ">創作共用：姓名標示、相同方式分享</a> 授權，歡迎加入 <a href="https://www.facebook.com/groups/youngmaker.magazine/">雜誌社團</a>
</div>
</body>
</html>
